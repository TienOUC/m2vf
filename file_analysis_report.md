# é¡¹ç›®æ–‡ä»¶ä½¿ç”¨æƒ…å†µåˆ†ææŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°
- æ€»æ–‡ä»¶æ•°ï¼š141ä¸ª TypeScript/TSX æ–‡ä»¶
- é¡¹ç›®ç»“æ„ï¼šNext.js + React + TypeScript é¡¹ç›®
- ä¸»è¦åŠŸèƒ½ï¼šå¯è§†åŒ–ç¼–è¾‘å™¨ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘èŠ‚ç‚¹ç¼–è¾‘ï¼‰

## åˆ†ææ–¹æ³•
1. æ£€æŸ¥æ¯ä¸ªæ–‡ä»¶çš„å¯¼å…¥å’Œä½¿ç”¨æƒ…å†µ
2. åˆ†æç»„ä»¶é—´çš„ä¾èµ–å…³ç³»
3. è¯†åˆ«æœªä½¿ç”¨çš„æ–‡ä»¶
4. åˆ†æå…¨å±€çŠ¶æ€ç®¡ç†é€»è¾‘

## ç»„ä»¶ä½¿ç”¨æƒ…å†µåˆ†æ

### 1. æ ¸å¿ƒç¼–è¾‘å™¨ç»„ä»¶
**å·²ä½¿ç”¨çš„ç»„ä»¶ï¼š**
- âœ… `FlowCanvas.tsx` - ä¸»ç”»å¸ƒç»„ä»¶
- âœ… `TextNode.tsx` - æ–‡æœ¬èŠ‚ç‚¹ç»„ä»¶
- âœ… `ImageNode.tsx` - å›¾ç‰‡èŠ‚ç‚¹ç»„ä»¶
- âœ… `VideoNode.tsx` - è§†é¢‘èŠ‚ç‚¹ç»„ä»¶
- âœ… `NodeBase.tsx` - èŠ‚ç‚¹åŸºç¡€ç»„ä»¶
- âœ… `NodeToolbar.tsx` - èŠ‚ç‚¹å·¥å…·æ 
- âœ… `FabricImageEditor.tsx` - å›¾ç‰‡ç¼–è¾‘å™¨
- âœ… `LexicalEditor.tsx` - æ–‡æœ¬ç¼–è¾‘å™¨
- âœ… `EditorContainer.tsx` - ç¼–è¾‘å™¨å®¹å™¨
- âœ… `FullscreenDialog.tsx` - å…¨å±å¯¹è¯æ¡†

### 2. å¸ƒå±€ç»„ä»¶
**å·²ä½¿ç”¨çš„ç»„ä»¶ï¼š**
- âœ… `LeftSidebar.tsx` - å·¦ä¾§è¾¹æ 
- âœ… `Navbar.tsx` - å¯¼èˆªæ 
- âœ… `UserAvatar.tsx` - ç”¨æˆ·å¤´åƒ
- âœ… `SidebarButton.tsx` - è¾¹æ æŒ‰é’®
- âœ… `MenuButton.tsx` - èœå•æŒ‰é’®

### 3. UI ç»„ä»¶
**å·²ä½¿ç”¨çš„ç»„ä»¶ï¼š**
- âœ… `ConfirmDialog.tsx` - ç¡®è®¤å¯¹è¯æ¡†
- âœ… `FloatingMenu.tsx` - æµ®åŠ¨èœå•
- âœ… `Message.tsx` - æ¶ˆæ¯ç»„ä»¶
- âœ… `Paginator.tsx` - åˆ†é¡µå™¨

### 4. é¡¹ç›®ç›¸å…³ç»„ä»¶
**å·²ä½¿ç”¨çš„ç»„ä»¶ï¼š**
- âœ… `ProjectCard.tsx` - é¡¹ç›®å¡ç‰‡
- âœ… `CreateProjectModal.tsx` - åˆ›å»ºé¡¹ç›®æ¨¡æ€æ¡†
- âœ… `ProjectEditModal.tsx` - é¡¹ç›®ç¼–è¾‘æ¨¡æ€æ¡†

### 5. è¡¨å•ç»„ä»¶
**å·²ä½¿ç”¨çš„ç»„ä»¶ï¼š**
- âœ… `AssetDrawer.tsx` - èµ„æºæŠ½å±‰
- âœ… `CreateFolderDialog.tsx` - åˆ›å»ºæ–‡ä»¶å¤¹å¯¹è¯æ¡†

## Hooks ä½¿ç”¨æƒ…å†µåˆ†æ

### 1. ç¼–è¾‘å™¨ç›¸å…³ Hooks
**å·²ä½¿ç”¨çš„ Hooksï¼š**
- âœ… `useNodeOperations.ts` - èŠ‚ç‚¹æ“ä½œ
- âœ… `useNodeAddition.ts` - èŠ‚ç‚¹æ·»åŠ 
- âœ… `useNodeBase.ts` - èŠ‚ç‚¹åŸºç¡€
- âœ… `usePaneInteractions.ts` - ç”»å¸ƒäº¤äº’
- âœ… `useTextNode.ts` - æ–‡æœ¬èŠ‚ç‚¹
- âœ… `useTextFormatting.ts` - æ–‡æœ¬æ ¼å¼åŒ–

### 2. è£å‰ªç›¸å…³ Hooks
**å·²ä½¿ç”¨çš„ Hooksï¼š**
- âœ… `useCropBox.ts` - è£å‰ªæ¡†
- âœ… `useCropMask.ts` - è£å‰ªé®ç½©
- âœ… `useCropHistory.ts` - è£å‰ªå†å²
- âœ… `useCropOperations.ts` - è£å‰ªæ“ä½œ
- âœ… `useEnhancedCropHistory.ts` - å¢å¼ºè£å‰ªå†å²
- âœ… `useFabricCanvas.ts` - Fabric ç”»å¸ƒ

### 3. æ•°æ®ç›¸å…³ Hooks
**å·²ä½¿ç”¨çš„ Hooksï¼š**
- âœ… `useProjectManagement.ts` - é¡¹ç›®ç®¡ç†
- âœ… `useProjectEditing.ts` - é¡¹ç›®ç¼–è¾‘
- âœ… `useHistory.ts` - å†å²è®°å½•

### 4. å·¥å…·ç±» Hooks
**å·²ä½¿ç”¨çš„ Hooksï¼š**
- âœ… `useClickOutside.ts` - å¤–éƒ¨ç‚¹å‡»æ£€æµ‹
- âœ… `useDebounce.ts` - é˜²æŠ–
- âœ… `useFullscreen.ts` - å…¨å±
- âœ… `useFileUpload.ts` - æ–‡ä»¶ä¸Šä¼ 
- âœ… `useFontStyle.ts` - å­—ä½“æ ·å¼
- âœ… `useLexicalEditor.ts` - Lexical ç¼–è¾‘å™¨
- âœ… `useImageLoader.ts` - å›¾ç‰‡åŠ è½½
- âœ… `useForm.ts` - è¡¨å•å¤„ç†

## ç±»å‹å®šä¹‰åˆ†æ

### 1. ç¼–è¾‘å™¨ç±»å‹
**å·²ä½¿ç”¨çš„ç±»å‹ï¼š**
- âœ… `editor.ts` - ç¼–è¾‘å™¨åŸºç¡€ç±»å‹
- âœ… `nodeOperations.ts` - èŠ‚ç‚¹æ“ä½œç±»å‹
- âœ… `text.ts` - æ–‡æœ¬ç±»å‹
- âœ… `image.ts` - å›¾ç‰‡ç±»å‹
- âœ… `fabric.ts` - Fabric ç±»å‹

### 2. è£å‰ªç±»å‹
**å·²ä½¿ç”¨çš„ç±»å‹ï¼š**
- âœ… `crop/index.ts` - è£å‰ªç±»å‹

### 3. å…¶ä»–ç±»å‹
**å·²ä½¿ç”¨çš„ç±»å‹ï¼š**
- âœ… `ai.ts` - AI ç›¸å…³ç±»å‹
- âœ… `auth.ts` - è®¤è¯ç±»å‹
- âœ… `store.ts` - çŠ¶æ€ç®¡ç†ç±»å‹

## å·¥å…·å‡½æ•°åˆ†æ

### 1. Fabric ç›¸å…³å·¥å…·
**å·²ä½¿ç”¨çš„å·¥å…·ï¼š**
- âœ… `fabric.ts` - Fabric å·¥å…·
- âœ… `crop.ts` - è£å‰ªå·¥å…·
- âœ… `history.ts` - å†å²å·¥å…·
- âœ… `canvas-helpers.ts` - ç”»å¸ƒåŠ©æ‰‹
- âœ… `crop-calculations.ts` - è£å‰ªè®¡ç®—
- âœ… `event-handlers.ts` - äº‹ä»¶å¤„ç†
- âœ… `image-processing.ts` - å›¾ç‰‡å¤„ç†

### 2. é€šç”¨å·¥å…·
**å·²ä½¿ç”¨çš„å·¥å…·ï¼š**
- âœ… `editor.ts` - ç¼–è¾‘å™¨å·¥å…·
- âœ… `image.ts` - å›¾ç‰‡å·¥å…·
- âœ… `text.ts` - æ–‡æœ¬å·¥å…·
- âœ… `token.ts` - Token å·¥å…·
- âœ… `validation.ts` - éªŒè¯å·¥å…·

## API å®¢æˆ·ç«¯åˆ†æ

### 1. å®¢æˆ·ç«¯ API
**å·²ä½¿ç”¨çš„ APIï¼š**
- âœ… `ai.ts` - AI API
- âœ… `auth.ts` - è®¤è¯ API
- âœ… `documents.ts` - æ–‡æ¡£ API
- âœ… `images.ts` - å›¾ç‰‡ API
- âœ… `projects.ts` - é¡¹ç›® API
- âœ… `workspace.ts` - å·¥ä½œåŒº API

### 2. Mock API
**å·²ä½¿ç”¨çš„ Mockï¼š**
- âœ… `background-removal.ts` - èƒŒæ™¯å»é™¤ Mock
- âœ… `image.ts` - å›¾ç‰‡ Mock
- âœ… `projects.ts` - é¡¹ç›® Mock
- âœ… `video.ts` - è§†é¢‘ Mock

## çŠ¶æ€ç®¡ç†åˆ†æ

### 1. çŠ¶æ€å­˜å‚¨
**å·²ä½¿ç”¨çš„ Storeï¼š**
- âœ… `authStore.ts` - è®¤è¯çŠ¶æ€
- âœ… `cropStore.ts` - è£å‰ªçŠ¶æ€
- âœ… `projectEditingStore.ts` - é¡¹ç›®ç¼–è¾‘çŠ¶æ€
- âœ… `projectManagementStore.ts` - é¡¹ç›®ç®¡ç†çŠ¶æ€
- âœ… `uiStore.ts` - UI çŠ¶æ€

## æ½œåœ¨æœªä½¿ç”¨çš„æ–‡ä»¶åˆ†æ

### 1. éœ€è¦è¿›ä¸€æ­¥éªŒè¯çš„æ–‡ä»¶
ä»¥ä¸‹æ–‡ä»¶å¯èƒ½éœ€è¦è¿›ä¸€æ­¥æ£€æŸ¥æ˜¯å¦è¢«ä½¿ç”¨ï¼š

**ç»„ä»¶ï¼š**
- â“ `NodeOperationsToolbar.tsx` - èŠ‚ç‚¹æ“ä½œå·¥å…·æ 
- â“ `NodeToolbarButton.tsx` - èŠ‚ç‚¹å·¥å…·æ æŒ‰é’®
- â“ `ImageEditorToolbarButton.tsx` - å›¾ç‰‡ç¼–è¾‘å™¨å·¥å…·æ æŒ‰é’®
- â“ `FontStyleSelector.tsx` - å­—ä½“æ ·å¼é€‰æ‹©å™¨
- â“ `LoadingState.tsx` - åŠ è½½çŠ¶æ€
- â“ `ErrorState.tsx` - é”™è¯¯çŠ¶æ€
- â“ `ResizeIcon.tsx` - è°ƒæ•´å¤§å°å›¾æ ‡

**Hooksï¼š**
- â“ `useNodeCentering.ts` - èŠ‚ç‚¹å±…ä¸­
- â“ `useNodeToolbar.ts` - èŠ‚ç‚¹å·¥å…·æ 

**å·¥å…·ï¼š**
- â“ `performance.ts` - æ€§èƒ½å·¥å…·

### 2. ç´¢å¼•æ–‡ä»¶åˆ†æ
æ‰€æœ‰ `index.ts` æ–‡ä»¶éƒ½æ˜¯å¯¼å‡ºæ–‡ä»¶ï¼Œéœ€è¦æ£€æŸ¥å…¶å¯¼å‡ºçš„å†…å®¹æ˜¯å¦è¢«ä½¿ç”¨ã€‚

## å»ºè®®

### 1. éœ€è¦è¿›ä¸€æ­¥éªŒè¯çš„æ–‡ä»¶
å»ºè®®å¯¹ä¸Šè¿°æ ‡è®°ä¸º â“ çš„æ–‡ä»¶è¿›è¡Œè¯¦ç»†çš„ä½¿ç”¨æƒ…å†µæ£€æŸ¥ã€‚

### 2. ä»£ç æ¸…ç†å»ºè®®
- æ£€æŸ¥æ‰€æœ‰ `index.ts` æ–‡ä»¶çš„å¯¼å‡ºæ˜¯å¦è¢«ä½¿ç”¨
- éªŒè¯å·¥å…·å‡½æ•°çš„ä½¿ç”¨æƒ…å†µ
- æ£€æŸ¥çŠ¶æ€ç®¡ç†çš„ä½¿ç”¨æƒ…å†µ

### 3. æ€§èƒ½ä¼˜åŒ–å»ºè®®
- è€ƒè™‘ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- ä¼˜åŒ–å›¾ç‰‡å’Œèµ„æºçš„åŠ è½½
- å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… å®Œæˆæ–‡ä»¶ç»“æ„åˆ†æ
2. ğŸ”„ è¿›è¡Œè¯¦ç»†çš„ä¾èµ–å…³ç³»åˆ†æ
3. ğŸ”„ è¯†åˆ«ç¡®åˆ‡çš„æœªä½¿ç”¨æ–‡ä»¶
4. ğŸ”„ ç”Ÿæˆæœ€ç»ˆçš„æŠ¥å‘Šå’Œå»ºè®®

---
*æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š2026-01-13*